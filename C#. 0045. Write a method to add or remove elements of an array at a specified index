/*
https://www.youtube.com/watch?v=H3gznh97TlQ&t=1012s
27:05

Author: #SimpleCode.

Task: Write a method to add or remove elements of an array at a specified index.

Задача: Написать метод для добавления или удаления элементов массива по указанному индексу.
*/


using System;

class Program 
{
    static void CreateMyArray(ref int[] MyArray)
    {
        Console.Write($"OriginalArray: ");
        Random Randomize = new Random();
        for (int i = 0; i < MyArray.Length; i++) 
        {
            int Temp = Randomize.Next(0, 100);
            MyArray[i] = Temp;
        }

        for (int i = 0; i < MyArray.Length; i++) Console.Write($"{MyArray[i]} ");
        Console.WriteLine();
    }
    
    static void ResizeByIndex (ref int[] OldArray, char MathAction, int NumberIndex)
    {
        int[] NewArray = MathAction == '+' ? new int[OldArray.Length+1] : new int[OldArray.Length-1];
    
    
        if (MathAction == '+')
        {
            int Count = 0;
            for (int i = 0; i < OldArray.Length; i++) 
            {
                if (NumberIndex == i) 
                {
                    NewArray[i] = 0;
                    NewArray[i+1] = OldArray[i];
                    Count++;
                }
                else NewArray[i+Count] = OldArray[i];
            }
        }
        
        
        if (MathAction == '-')
        {
            int Count = 0;
            for (int i = 0; i < NewArray.Length; i++) 
            {
                if (NumberIndex == i) 
                {
                    Count++;
                }
                NewArray[i] = OldArray[Count+i];
            }
        }
        OldArray = NewArray;
    }
    
    static void Main() 
    {
        int[] MyArray = new int[5];
        
        CreateMyArray(ref MyArray);
        
        char MathAction;
        while (true)
        {
            Console.Write($"Enter '+' or '-' to select an action: Add or Remove an element from an array: ");
            bool _IsMathAction = char.TryParse(Console.ReadLine(), out MathAction);
            if ((_IsMathAction == false)||((MathAction != '+')&&(MathAction != '-'))) Console.WriteLine("Error. Try Again");
            else break;
        }
        
        int NumberIndex;
        while (true)
        {
            Console.Write("Enter NumberIndex New Array: ");
            bool _IsNumberIndex = int.TryParse(Console.ReadLine(), out NumberIndex);
            if ((_IsNumberIndex == false)||(NumberIndex >= MyArray.Length)||(NumberIndex < 0)) Console.WriteLine("Error. Try Again");
            else break;
        }
        
        ResizeByIndex(ref MyArray, MathAction, NumberIndex);

        Console.Write("MyArray New: ");
        for (int i = 0; i < MyArray.Length; i++) Console.Write($"{MyArray[i]} ");
        Console.WriteLine();
    }
}
